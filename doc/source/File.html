<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='Cs-file-data-File'>/**
</span>A model which represents an individual file. The model has the following fields:

- `id` : Int. Unique ID value assigned to the model.

- `name` : String. Name of the file as given by the browser.

- `size` : Int. Size of the file or -1 if no size was given.

- `type` : String. Either {@link #FORM} or {@link #FILE}. The type of the file, indicating the type of object stored in the {@link #raw}
property.

Extends [Ext.data.Model](http://docs.sencha.com/ext-js/4-0/#/api/Ext.data.Model).
*/
Ext.define('Cs.file.data.File', (function() {
  var FORM = 'form',
  FILE = 'file';
  
  return {
<span id='Cs-file-data-File-method-constructor'>/**
</span>@constructor

Creates a new model instance. The `raw` property must be present on the 
argument given, from which the `type` field will be determined. An `id`
is NOT automatically assigned -- it must be assigned externally.

@param {Object} data Must have a `raw` property containing a
[Ext.form.field.File](http://docs.sencha.com/ext-js/4-0/#/api/Ext.form.field.File) component
or [File](http://www.w3.org/TR/FileAPI/) object.

Other properties, except `type`, will be copied to the corresponding field.
  */    
    constructor: function (data) {
      if(typeof data.raw == &quot;undefined&quot;)
        throw &quot;Cs.file.data.File: raw property missing. Can't create a file without raw data.&quot;;

      this.raw = data.raw;
      
      if(Cs.file.data.File.isFile(this.raw)) {
        data.type = Cs.file.data.File.FILE;
        data.size = this.raw.size;
        data.name = this.raw.name;
      }
      else if(Cs.file.data.File.isFileField(this.raw)) {
        data.type = Cs.file.data.File.FORM;
        data.size = -1;
        data.name = this.raw.getValue();
      }
      else
        throw &quot;Cs.file.data.File: Unable to determine file type.&quot;;

      this.callParent(arguments);
    },
    extend: 'Ext.data.Model',
    requires: 'Ext.data.Model',
    idProperty: 'id',
    statics: {
<span id='Cs-file-data-File-property-FORM'>      /**
</span>@static
@property {String}

The value assigned to the `type` field when the file is
represented by a
[Ext.form.field.File](http://docs.sencha.com/ext-js/4-0/#/api/Ext.form.field.File)
component.
       */
      FORM: FORM,
<span id='Cs-file-data-File-property-FILE'>/**
</span>@static
@property {String}

The value assigned to the `type` field when the file is
represented by a [File](http://www.w3.org/TR/FileAPI/) object.
*/
      FILE: FILE,
<span id='Cs-file-data-File-method-isFile'>/**
</span>@static
@return {Boolean} 

Determines if the argument given is a [File](http://www.w3.org/TR/FileAPI/) object.

@param {Object} f The object to test.
*/
      isFile: function(f) {
        return Cs.file.data.FileManager.supportsFile &amp;&amp; 
          File.prototype.isPrototypeOf(f);
      },
<span id='Cs-file-data-File-method-isFileField'>/**
</span>@static
@return {Boolean} 

Determines if the argument given is a [Ext.form.field.File](http://docs.sencha.com/ext-js/4-0/#/api/Ext.form.field.File) component.

@param {Object} f The object to test.
*/
      isFileField: function(f) {
        return Ext.ClassManager.getName(f) == &quot;Ext.form.field.File&quot;;
      }
    },
    fields: [{
      name: 'id', type: 'int' 
    }, {
      name: 'name', type: 'string' 
    }, {
      name: 'size', type: 'int' 
    }, {
      name: 'type', type: 'string'
    }],
    validations: [{
      type: 'inclusion', field: 'type', list: [FORM, FILE]
    }],
<span id='Cs-file-data-File-property-raw'>/**
</span>@property

The actual
[Ext.form.field.File](http://docs.sencha.com/ext-js/4-0/#/api/Ext.form.field.File)
or [File](http://www.w3.org/TR/FileAPI/) object given to the
constructor.
  */
    raw: null
  };
})());

</pre>
</body>
</html>
